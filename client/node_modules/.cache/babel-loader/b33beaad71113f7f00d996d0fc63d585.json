{"ast":null,"code":"import { searchYoutube } from '../controllers/ChanelController';\n\nclass YoutubePlay {\n  constructor(player, startSeconds = 0) {\n    this.onPlayQueue = [];\n    this.onPlayQueueName = [];\n    this.onPlaying = false;\n    this.player = player;\n    this.onPlayingSong = null;\n    this.startSeconds = startSeconds;\n    this.dataEvent = true;\n  }\n\n  searchYoutube(q) {\n    searchYoutube(q).then(res => {\n      let vid = res.videoId;\n      this.onPlayQueueName.push(res.title);\n      this.playVideo(vid);\n    });\n  }\n\n  playVideo(vid) {\n    if (vid) {\n      this.onPlayQueue.push(vid);\n    }\n\n    if (this.onPlaying === false) {\n      this.onPlayingSong = this.onPlayQueue.shift();\n      this.onPlayQueueName.shift();\n      this.player.loadVideoById({\n        videoId: this.onPlayingSong,\n        startSeconds: this.startSeconds\n      });\n      this.player.playVideo();\n      this.onPlaying = true;\n    }\n\n    this.player.on('stateChange', event => {\n      if (event.data === 0) {\n        if (this.dataEvent) {\n          this.dataEvent = false;\n\n          if (this.onPlayQueue.length > 0 && this.onPlaying) {\n            this.onPlayingSong = this.onPlayQueue.shift();\n            this.onPlayQueueName.shift();\n            this.player.loadVideoById(this.onPlayingSong);\n            this.player.playVideo().then(() => {\n              this.onPlaying = true;\n              this.dataEvent = true;\n            });\n          } else {\n            this.onPlaying = false;\n            this.dataEvent = true;\n          }\n        }\n      }\n    });\n  }\n\n  pushQueue(list) {\n    this.onPlayQueue.push(list);\n  }\n\n  getPlayQueue() {\n    return this.onPlayQueue;\n  }\n\n  getIsPlaying() {\n    return this.onPlaying;\n  }\n\n  getCurrentTime() {\n    return this.player.getCurrentTime();\n  }\n\n  getCurrentSong() {\n    return this.onPlayingSong;\n  }\n\n  getPlayQueueName() {\n    return this.onPlayQueueName;\n  }\n\n  skipVideo() {\n    if (this.onPlayQueue.length > 0 && this.onPlaying) {\n      this.onPlayingSong = this.onPlayQueue.shift();\n      this.onPlayQueueName.shift();\n      this.player.loadVideoById(this.onPlayingSong);\n      this.player.playVideo().then(() => {\n        this.onPlaying = true;\n        this.dataEvent = true;\n      });\n    } else {\n      this.onPlaying = false;\n      this.dataEvent = true;\n    }\n  }\n\n}\n\nexport default YoutubePlay;","map":{"version":3,"sources":["/opt/lampp/htdocs/STUDY_SPACE/chat-app/src/chats/YoutubePlay.js"],"names":["searchYoutube","YoutubePlay","constructor","player","startSeconds","onPlayQueue","onPlayQueueName","onPlaying","onPlayingSong","dataEvent","q","then","res","vid","videoId","push","title","playVideo","shift","loadVideoById","on","event","data","length","pushQueue","list","getPlayQueue","getIsPlaying","getCurrentTime","getCurrentSong","getPlayQueueName","skipVideo"],"mappings":"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","sourcesContent":["import { searchYoutube } from '../controllers/ChanelController';\n\nclass YoutubePlay {\n    constructor(player, startSeconds = 0) {\n        this.onPlayQueue = [];\n        this.onPlayQueueName = [];\n        this.onPlaying = false;\n        this.player = player;\n        this.onPlayingSong = null;\n        this.startSeconds = startSeconds;\n        this.dataEvent = true;\n    }\n\n    searchYoutube(q) {\n        searchYoutube(q)\n            .then(res => {\n                let vid = res.videoId;\n                this.onPlayQueueName.push(res.title);\n                this.playVideo(vid)\n            })\n\n    }\n\n    playVideo(vid) {\n        if (vid) {\n            this.onPlayQueue.push(vid);\n        }\n\n        if (this.onPlaying === false) {\n            this.onPlayingSong = this.onPlayQueue.shift();\n            this.onPlayQueueName.shift();\n            this.player.loadVideoById({\n                videoId: this.onPlayingSong,\n                startSeconds: this.startSeconds\n            });\n            this.player.playVideo();\n            this.onPlaying = true;\n        }\n\n\n        this.player.on('stateChange', (event) => {\n            if (event.data === 0) {\n                if(this.dataEvent) {\n                    this.dataEvent = false;\n                    if (this.onPlayQueue.length > 0 && this.onPlaying) {\n                        this.onPlayingSong = this.onPlayQueue.shift();\n                        this.onPlayQueueName.shift();\n                        this.player.loadVideoById(this.onPlayingSong);\n                        this.player.playVideo().then( () => {\n                            this.onPlaying = true;\n                            this.dataEvent = true;\n                        });\n                    } else {\n                        this.onPlaying = false;\n                        this.dataEvent = true;\n                    }\n                }\n            }\n        });\n    }\n\n    pushQueue(list) {\n        this.onPlayQueue.push(list);\n    }\n    \n    getPlayQueue() {\n        return this.onPlayQueue;\n    }\n\n    getIsPlaying() {\n        return this.onPlaying;\n    }\n\n    getCurrentTime() {\n        return this.player.getCurrentTime();\n    }\n\n    getCurrentSong() {\n        return this.onPlayingSong;\n    }\n\n    getPlayQueueName() {\n        return this.onPlayQueueName;\n    }\n\n    skipVideo() {\n        if (this.onPlayQueue.length > 0 && this.onPlaying) {\n\n            this.onPlayingSong = this.onPlayQueue.shift();\n            this.onPlayQueueName.shift();\n            this.player.loadVideoById(this.onPlayingSong);\n            this.player.playVideo().then( () => {\n                this.onPlaying = true;\n                this.dataEvent = true;\n            });\n        } else {\n            this.onPlaying = false;\n            this.dataEvent = true;\n        }\n    }\n}\n\nexport default YoutubePlay;\n"]},"metadata":{},"sourceType":"module"}