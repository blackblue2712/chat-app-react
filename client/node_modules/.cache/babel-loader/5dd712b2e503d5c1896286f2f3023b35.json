{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/STUDY_SPACE/chat-app/src/chats/VideoCall.js\";\nimport React from 'react';\nimport _ from 'lodash';\nimport PeerConnection from '../calls/PeerConnection';\nimport \"./VideoCall.css\";\nimport adapter from 'webrtc-adapter';\n\nclass VideoCall extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.trace = text => {\n      text = text.trim();\n      const now = (window.performance.now() / 1000).toFixed(3);\n      console.log(now, text);\n    };\n\n    this.state = {\n      clientId: '',\n      callWindow: '',\n      callModal: '',\n      callFrom: '',\n      localSrc: null,\n      peerSrc: null\n    };\n    this.pc = {};\n    this.config = null;\n    this.startCallHandler = this.startCall.bind(this);\n    this.endCallHandler = this.endCall.bind(this);\n    this.rejectCallHandler = this.rejectCall.bind(this);\n  }\n\n  componentDidMount() {\n    console.log(this.props);\n    this.video = document.querySelector(\"video\");\n    this.constraints = {\n      video: true // video:  {\n      //     width: {\n      //       min: 1280\n      //     },\n      //     height: {\n      //       min: 720\n      //     }\n      // }\n\n    }; // Set up to exchange only video.\n\n    this.offerOptions = {\n      offerToReceiveVideo: 1\n    }; // Define initial start time of the call (defined as connection between peers).\n\n    let startTime = null; // Define peer connections, streams and video elements.\n\n    const localVideo = document.getElementById('call-local-video');\n    const remoteVideo = document.getElementById('call-remote-video');\n    const startButton = document.getElementById('startButton');\n    const callButton = document.getElementById('callButton');\n    const hangupButton = document.getElementById('hangupButton');\n  }\n\n  componentWillReceiveProps(nextProps) {\n    console.log;\n\n    if (nextProps.socket) {\n      nextProps.socket.on('request', ({\n        from: callFrom\n      }) => {\n        this.setState({\n          callModal: 'active',\n          callFrom\n        });\n      }).on('call', data => {\n        if (data.sdp) {\n          console.log(\"IFFFFFFF\", data.sdp);\n          this.pc.setRemoteDescription(data.sdp);\n\n          if (data.sdp.type === 'offer') {\n            console.log(\"offer\");\n            this.pc.createAnswer();\n          }\n        } else this.pc.addIceCandidate(data.candidate);\n      }); // .on('end', this.endCall.bind(this, false))\n    }\n  }\n\n  startCall(isCaller, friendID, config) {\n    this.config = config;\n    this.pc = new PeerConnection(friendID).on('localStream', src => {\n      const newState = {\n        callWindow: 'active',\n        localSrc: src\n      };\n      if (!isCaller) newState.callModal = '';\n      this.setState(newState);\n    }).on('peerStream', src => this.setState({\n      peerSrc: src\n    })).start(isCaller, config);\n  }\n\n  rejectCall() {\n    const {\n      callFrom\n    } = this.state;\n    this.props.socket.emit('end', {\n      to: callFrom\n    });\n    this.setState({\n      callModal: ''\n    });\n  }\n\n  endCall(isStarter) {\n    if (_.isFunction(this.pc.stop)) {\n      this.pc.stop(isStarter);\n    }\n\n    this.pc = {};\n    this.config = null;\n    this.setState({\n      callWindow: '',\n      callModal: '',\n      localSrc: null,\n      peerSrc: null\n    });\n  } // Logs an action (text) and the time when it happened on the console.\n\n\n  render() {\n    console.log(\"RENDER VIDEO CALL\");\n    return React.createElement(\"div\", {\n      class: \"call\",\n      id: \"call\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"video\", {\n      id: \"call-local-video\",\n      autoPlay: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(\"video\", {\n      id: \"call-remote-video\",\n      autoPlay: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"inside\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"participant\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      class: \"avatar-call\",\n      src: \"https://res.cloudinary.com/dged6fqkf/image/upload/v1581173169/jbwkupd6wxap1udmgfmz.png\",\n      alt: \"avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, \"Connecting to Sarah\"), React.createElement(\"div\", {\n      class: \"wave\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      class: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      class: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"options\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-microphone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-video-camera\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }, \"+\")), React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-volume\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-comment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      id: \"end-call-video\",\n      class: \"btn option call-end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default VideoCall;","map":{"version":3,"sources":["/opt/lampp/htdocs/STUDY_SPACE/chat-app/src/chats/VideoCall.js"],"names":["React","_","PeerConnection","adapter","VideoCall","Component","constructor","props","trace","text","trim","now","window","performance","toFixed","console","log","state","clientId","callWindow","callModal","callFrom","localSrc","peerSrc","pc","config","startCallHandler","startCall","bind","endCallHandler","endCall","rejectCallHandler","rejectCall","componentDidMount","video","document","querySelector","constraints","offerOptions","offerToReceiveVideo","startTime","localVideo","getElementById","remoteVideo","startButton","callButton","hangupButton","componentWillReceiveProps","nextProps","socket","on","from","setState","data","sdp","setRemoteDescription","type","createAnswer","addIceCandidate","candidate","isCaller","friendID","src","newState","start","emit","to","isStarter","isFunction","stop","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport PeerConnection from '../calls/PeerConnection';\n\nimport \"./VideoCall.css\";\n\nimport adapter from 'webrtc-adapter';\n\nclass VideoCall extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            clientId: '',\n            callWindow: '',\n            callModal: '',\n            callFrom: '',\n            localSrc: null,\n            peerSrc: null\n        };\n        this.pc = {};\n        this.config = null;\n\n        this.startCallHandler = this.startCall.bind(this);\n        this.endCallHandler = this.endCall.bind(this);\n        this.rejectCallHandler = this.rejectCall.bind(this);\n\n    }\n\n    componentDidMount() {\n        console.log(this.props);\n        this.video = document.querySelector(\"video\");\n        this.constraints = {\n            video: true\n            // video:  {\n            //     width: {\n            //       min: 1280\n            //     },\n            //     height: {\n            //       min: 720\n            //     }\n            // }\n        }\n\n        // Set up to exchange only video.\n        this.offerOptions = {\n            offerToReceiveVideo: 1,\n        };\n\n        // Define initial start time of the call (defined as connection between peers).\n        let startTime = null;\n\n        // Define peer connections, streams and video elements.\n        const localVideo = document.getElementById('call-local-video');\n        const remoteVideo = document.getElementById('call-remote-video');\n\n        const startButton = document.getElementById('startButton');\n        const callButton = document.getElementById('callButton');\n        const hangupButton = document.getElementById('hangupButton');\n\n    }\n\n    componentWillReceiveProps(nextProps) {\n        console.log\n        if(nextProps.socket) {\n            nextProps.socket\n                .on('request', ({ from: callFrom }) => {\n                    this.setState({ callModal: 'active', callFrom });\n                })\n                .on('call', (data) => {\n                    if (data.sdp) {\n                        console.log(\"IFFFFFFF\", data.sdp)\n                        this.pc.setRemoteDescription(data.sdp);\n                        if (data.sdp.type === 'offer') {\n                            console.log(\"offer\");\n                            this.pc.createAnswer();\n                        }\n                    } else this.pc.addIceCandidate(data.candidate);\n                })\n                // .on('end', this.endCall.bind(this, false))\n        }\n    }\n\n    startCall(isCaller, friendID, config) {\n        this.config = config;\n        this.pc = new PeerConnection(friendID)\n            .on('localStream', (src) => {\n                const newState = { callWindow: 'active', localSrc: src };\n                if (!isCaller) newState.callModal = '';\n                this.setState(newState);\n            })\n            .on('peerStream', src => this.setState({ peerSrc: src }))\n            .start(isCaller, config);\n    }\n\n    rejectCall() {\n        const { callFrom } = this.state;\n        this.props.socket.emit('end', { to: callFrom });\n        this.setState({ callModal: '' });\n    }\n\n    endCall(isStarter) {\n        if (_.isFunction(this.pc.stop)) {\n            this.pc.stop(isStarter);\n        }\n        this.pc = {};\n        this.config = null;\n        this.setState({\n            callWindow: '',\n            callModal: '',\n            localSrc: null,\n            peerSrc: null\n        });\n    }\n\n\n    // Logs an action (text) and the time when it happened on the console.\n    trace = (text) => {\n        text = text.trim();\n        const now = (window.performance.now() / 1000).toFixed(3);\n\n        console.log(now, text);\n    }\n\n\n    render() {\n        console.log(\"RENDER VIDEO CALL\");\n        return (\n            <div class=\"call\" id=\"call\">\n                <video id=\"call-local-video\" autoPlay></video>\n                <video id=\"call-remote-video\" autoPlay></video>\n                <div class=\"content\">\n                    <div class=\"container\">\n                        <div class=\"inside\">\n                            <div class=\"panel\">\n                                <div class=\"participant\">\n                                    <img class=\"avatar-call\" src=\"https://res.cloudinary.com/dged6fqkf/image/upload/v1581173169/jbwkupd6wxap1udmgfmz.png\" alt=\"avatar\" />\n                                    <span>Connecting to Sarah</span>\n                                    <div class=\"wave\">\n                                        <span class=\"dot\"></span>\n                                        <span class=\"dot\"></span>\n                                        <span class=\"dot\"></span>\n                                    </div>\n                                </div>\n                                <div class=\"options\">\n                                    <button class=\"btn option\"><i class=\"ti-microphone\"></i></button>\n                                    <button class=\"btn option\"><i class=\"ti-video-camera\"></i></button>\n                                    <button class=\"btn option\"><i class=\"ti-user\">+</i></button>\n                                    <button class=\"btn option\"><i class=\"ti-volume\"></i></button>\n                                    <button class=\"btn option\"><i class=\"ti-comment\"></i></button>\n                                </div>\n                                <button id=\"end-call-video\" class=\"btn option call-end\"><i class=\"ti-close\"></i></button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default VideoCall;"]},"metadata":{},"sourceType":"module"}