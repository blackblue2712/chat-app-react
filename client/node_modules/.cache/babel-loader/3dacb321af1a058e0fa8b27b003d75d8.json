{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/STUDY_SPACE/chat-app/src/chats/VideoCall.js\";\nimport React from 'react';\nimport PeerConnection from '../calls/PeerConnection';\nimport \"./VideoCall.css\";\nimport adapter from 'webrtc-adapter';\n\nclass VideoCall extends React.Component {\n  constructor() {\n    super();\n\n    this.trace = text => {\n      text = text.trim();\n      const now = (window.performance.now() / 1000).toFixed(3);\n      console.log(now, text);\n    };\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this.video = document.querySelector(\"video\");\n    this.constraints = {\n      video: true // video:  {\n      //     width: {\n      //       min: 1280\n      //     },\n      //     height: {\n      //       min: 720\n      //     }\n      // }\n\n    }; // Set up to exchange only video.\n\n    this.offerOptions = {\n      offerToReceiveVideo: 1\n    }; // Define initial start time of the call (defined as connection between peers).\n\n    let startTime = null; // Define peer connections, streams and video elements.\n\n    const localVideo = document.getElementById('call-local-video');\n    const remoteVideo = document.getElementById('call-remote-video');\n    const startButton = document.getElementById('startButton');\n    const callButton = document.getElementById('callButton');\n    const hangupButton = document.getElementById('hangupButton'); // navigator.mediaDevices\n    // .getUserMedia(this.constraints)\n    // .then(this.handleSuccess)\n    // .catch(this.handleError);\n  }\n\n  startCall(isCaller, friendID, config) {\n    this.config = config;\n    this.pc = new PeerConnection(friendID).on('localStream', src => {\n      const newState = {\n        callWindow: 'active',\n        localSrc: src\n      };\n      if (!isCaller) newState.callModal = '';\n      this.setState(newState);\n    }).on('peerStream', src => this.setState({\n      peerSrc: src\n    })).start(isCaller, config);\n  } // Logs an action (text) and the time when it happened on the console.\n\n\n  render() {\n    return React.createElement(\"div\", {\n      class: \"call\",\n      id: \"call\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"video\", {\n      id: \"call-local-video\",\n      autoPlay: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(\"video\", {\n      id: \"call-remote-video\",\n      autoPlay: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      class: \"content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"inside\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"panel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"participant\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      class: \"avatar-call\",\n      src: \"https://res.cloudinary.com/dged6fqkf/image/upload/v1581173169/jbwkupd6wxap1udmgfmz.png\",\n      alt: \"avatar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Connecting to Sarah\"), React.createElement(\"div\", {\n      class: \"wave\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      class: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      class: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      class: \"dot\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      class: \"options\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-microphone\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-video-camera\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-user\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"+\")), React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-volume\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    })), React.createElement(\"button\", {\n      class: \"btn option\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-comment\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      id: \"end-call-video\",\n      class: \"btn option call-end\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"ti-close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    })))))));\n  }\n\n}\n\nexport default VideoCall;","map":{"version":3,"sources":["/opt/lampp/htdocs/STUDY_SPACE/chat-app/src/chats/VideoCall.js"],"names":["React","PeerConnection","adapter","VideoCall","Component","constructor","trace","text","trim","now","window","performance","toFixed","console","log","state","componentDidMount","video","document","querySelector","constraints","offerOptions","offerToReceiveVideo","startTime","localVideo","getElementById","remoteVideo","startButton","callButton","hangupButton","startCall","isCaller","friendID","config","pc","on","src","newState","callWindow","localSrc","callModal","setState","peerSrc","start","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PeerConnection from '../calls/PeerConnection';\n\nimport \"./VideoCall.css\";\n\nimport adapter from 'webrtc-adapter';\n\nclass VideoCall extends React.Component {\n    constructor() {\n        super();\n        this.state = {\n        }\n    }\n\n    componentDidMount() {\n        this.video = document.querySelector(\"video\");\n        this.constraints = {\n            video: true\n            // video:  {\n            //     width: {\n            //       min: 1280\n            //     },\n            //     height: {\n            //       min: 720\n            //     }\n            // }\n        }\n\n        // Set up to exchange only video.\n        this.offerOptions = {\n            offerToReceiveVideo: 1,\n        };\n\n        // Define initial start time of the call (defined as connection between peers).\n        let startTime = null;\n\n        // Define peer connections, streams and video elements.\n        const localVideo = document.getElementById('call-local-video');\n        const remoteVideo = document.getElementById('call-remote-video');\n\n        const startButton = document.getElementById('startButton');\n        const callButton = document.getElementById('callButton');\n        const hangupButton = document.getElementById('hangupButton');\n\n        // navigator.mediaDevices\n        // .getUserMedia(this.constraints)\n        // .then(this.handleSuccess)\n        // .catch(this.handleError);\n    }\n\n    startCall(isCaller, friendID, config) {\n        this.config = config;\n        this.pc = new PeerConnection(friendID)\n        .on('localStream', (src) => {\n            const newState = { callWindow: 'active', localSrc: src };\n            if (!isCaller) newState.callModal = '';\n            this.setState(newState);\n        })\n        .on('peerStream', src => this.setState({ peerSrc: src }))\n        .start(isCaller, config);\n    }\n\n    // Logs an action (text) and the time when it happened on the console.\n    trace = (text) => {\n        text = text.trim();\n        const now = (window.performance.now() / 1000).toFixed(3);\n\n        console.log(now, text);\n    }\n\n\nrender() {\n    return (\n        <div class=\"call\" id=\"call\">\n            <video id=\"call-local-video\" autoPlay></video>\n            <video id=\"call-remote-video\" autoPlay></video>\n            <div class=\"content\">\n                <div class=\"container\">\n                    <div class=\"inside\">\n                        <div class=\"panel\">\n                            <div class=\"participant\">\n                                <img class=\"avatar-call\" src=\"https://res.cloudinary.com/dged6fqkf/image/upload/v1581173169/jbwkupd6wxap1udmgfmz.png\" alt=\"avatar\" />\n                                <span>Connecting to Sarah</span>\n                                <div class=\"wave\">\n                                    <span class=\"dot\"></span>\n                                    <span class=\"dot\"></span>\n                                    <span class=\"dot\"></span>\n                                </div>\n                            </div>\n                            <div class=\"options\">\n                                <button class=\"btn option\"><i class=\"ti-microphone\"></i></button>\n                                <button class=\"btn option\"><i class=\"ti-video-camera\"></i></button>\n                                <button class=\"btn option\"><i class=\"ti-user\">+</i></button>\n                                <button class=\"btn option\"><i class=\"ti-volume\"></i></button>\n                                <button class=\"btn option\"><i class=\"ti-comment\"></i></button>\n                            </div>\n                            <button id=\"end-call-video\" class=\"btn option call-end\"><i class=\"ti-close\"></i></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n}\n\nexport default VideoCall;"]},"metadata":{},"sourceType":"module"}